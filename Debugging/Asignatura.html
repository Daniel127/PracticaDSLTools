<!- Comenzamos con la estructura HTML abriendo la etiqueta html ->
<html>
<!- Establecemos la cabecera de la página y el título, que coincide con el nombre de la entidad para la que se genera la página
lang="GestionMatricula" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>
        Asignatura
    </title>
</head>
<!- Le asignamos el estilo predefinido a la página  ->
<body bgcolor="#B8D1F1">
    <center>
        <!- Comenzamos el código PHP abriendo su etiqueta ->

        <?php

        /*Comprobamos con un if que no hay datos en el formulario, concretamente se comprueba si tiene algún valor el campo de
        texto del atributo identificador “varNumMat”, recuperando con $_GET su contenido*/
        if (!(isset($_GET['varNumMat']))){

        /*Cerramos el código PHP para seguir con el HTML */
        ?>

        <!-Creamos un formulario para los recoger los datos de los atributos ->
        <form>
            <!- Le damos un título que coincide con la entidad ->
            <h1>Asignatura</h1>

            <!- Para cada atributo, incluyendo, el atributo identificador se pone una etiqueta coincidente con el nombre del atributo en cuestión seguido del signo de puntuación dos
            puntos. A continuación se crea un campo de texto vacio para introducir el valor. Para darle nombre al campo de texto, en este caso se ha seguido el patrón del nombre del
            atributo y el prefijo “var”  ->
            Codigo: <input name="varCodigo" type="text" value="">
            <br>
            <br>
            Nombre: <input name="varNombre" type="text" value="">
            <br>
            <br>
            <!- Creamos el botón en el que aparecerá el texto Alta ->
            <input type="submit" value="Alta" />

            <!- Cerramos el formulario  ->
        </form>
        <a href="Plantillaphp.html">           <input value="Volver" type="submit" /> </a>
        <!- Volvemos a abrir el código php, para considerar el else del if previo, es decir, que los campos del formulario, sí contengan valores y debamos
        insertarlos en la BD  ->
        <?php

        }
        else{
        /* Establecemos la conexión */
        $conex = @mysql_connect("localhost","root") or die("ERROR...");

        // Seleccionamos la BD que coincide con el nombre del modelo WebER
        mysql_select_db("GestionMat") or die("ERROR CON LA BASE DE DATOS");

        // Recogemos en variables el valor de los campos de texto del usuario, las variables se definen con el nombre del atributo precedido por el símbolo$
        $Codigo = $_GET['varCodigo'];
        $Nombre = $_GET['varNombre'];

        //  Insertamos en la tabla que se llama como la entidad el valor de las variables y se guarda en resultado

        $resultado = mysql_query("INSERT INTO Alumno VALUES('$Codigo','$Nombre')");


        //Evaluamos el valor de resultado para informar si los datos se han insertado
        correctamente en la BD o ha habido algún error
        if ($resultado){
        echo" Datos Insertados ";
        }
        else
        echo"Error en la inserción";
        //Cerramos la conexión
        mysql_close();
        //Cerramos el if
        }
        //Cerramos el código PHP
        ?>
        <!-Cerramos el cuerpo y el html de la página ->
    </center>
</body>
</html>

